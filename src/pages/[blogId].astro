---
import Layout from '../layouts/Layout.astro';
import { getBlogDetail, getBlogs } from '../libs/macrocms';
import BaseHeader from '../components/BaseHeader.astro';

export async function getStaticPaths() {
    const BlogData = await getBlogs({ fields: 'id' });
    return BlogData.contents.map((blog) => ({
        params: {
            blogId: blog.id,
        },
    }));
}

const { blogId } = Astro.params;
const blog = await getBlogDetail(blogId as string);
---

<Layout title="blogs">
    <BaseHeader />
    <main class="main">
        <div class="bg"></div>
        <div class="inner">
            <h1>{blog.title}</h1>
            <p>公開日：{new Date(blog.publishedAt).toLocaleString()}</p>
            <div set:html={blog.content} />
        </div>
    </main>

    <style>
        main {
            color: #fff;
        }
    </style>
</Layout>

<style lang="scss">
    @import '../styles/_single';
    .inner {
        width: vw(1200);
        margin: auto;
    }
</style>

<style lang="scss" is:global>
    @import '../styles/_single';
    img {
        width: 100%;
        height: auto;
    }
</style>
